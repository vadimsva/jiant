(function(){var la=function(){return{template:function(f,u,n){return $("#"+f+u)},viewComponent:function(f,u,n,R,z){return f.find("."+n+R)},view:function(f,u){return $("#"+f+u)}}},Q=function(f){function u(a){var b=Number(a);return 0===b&&0!==a&&"0"!==a||isNaN(b)?null:new Date(b)}function n(a){a=""+a;return 0==a.length?"00":1==a.length?"0"+a:a}function R(a){f.each(a.find("*"),function(a,c){f.each(c.attributes,function(a,b){0>b.value.indexOf(" ")&&0<=b.value.indexOf("!!")&&f(c).attr(b.name,b.value.replace(/!!/g,
"e2013e03e11eee "))})});return f.trim(f(a).html()).replace(/!!/g,"!! ").replace(/e2013e03e11eee /g,"!! ")}function z(a,b,c){v("Called parse template "+(c?c:"")+" with data",b);b=b||{};c=f.trim(f(a).html());var e={},d="";c=jiant.isMSIE?R(f(a)):c.replace(/!!/g,"!! ");try{var g=e[c];if(!g){var h="var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").replace(/'(?=[^#]*#>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/!! (.+?)!! /g,"',$1,'").split("!?").join("');").split("?!").join("p.push('")+
"');}return p.join('');",g=new Function("obj",h);e[c]=g}return f.trim(g(b))}catch(k){d=k.message,I("Error parse template: "+d)}return"!!! ERROR: "+d.toString()+" !!!"}function Q(a){a.keydown(function(b){return b.keyCode==jiant.key.down&&0<a.val()?(a.val(a.val()-1),a.trigger("change"),!1):b.keyCode==jiant.key.up?(a.val(parseInt(a.val())+1),a.trigger("change"),!1):b.keyCode!=jiant.key.backspace&&b.keyCode!=jiant.key.del&&b.keyCode!=jiant.key.end&&b.keyCode!=jiant.key.left&&b.keyCode!=jiant.key.right&&
b.keyCode!=jiant.key.home&&b.keyCode!=jiant.key.tab&&b.keyCode!=jiant.key.enter&&(b.shiftKey||(48>b.keyCode||57<b.keyCode)&&(96>b.keyCode||105<b.keyCode))?(b.preventDefault(),!1):!0})}function ma(a){a.keydown(function(b){return b.keyCode==jiant.key.down&&0<a.val()?(a.val(a.val()-1),a.trigger("change"),!1):b.keyCode==jiant.key.up?(a.val(parseInt(a.val())+1),a.trigger("change"),!1):b.keyCode==jiant.key.dot?0>a.val().indexOf(".")&&0<a.val().length:b.keyCode!=jiant.key.backspace&&b.keyCode!=jiant.key.del&&
b.keyCode!=jiant.key.end&&b.keyCode!=jiant.key.left&&b.keyCode!=jiant.key.right&&b.keyCode!=jiant.key.home&&b.keyCode!=jiant.key.tab&&b.keyCode!=jiant.key.enter&&(b.shiftKey||(48>b.keyCode||57<b.keyCode)&&(96>b.keyCode||105<b.keyCode))?(b.preventDefault(),!1):!0})}function na(a,b,c,e){if(b[0]){var d=b[0].tagName.toLowerCase();"form"!=d&&(jiant.logError(c+"."+e+" form element assigned to non-form: "+d),jiant.DEV_MODE&&alert(c+"."+e+" form element assigned to non-form: "+d));b.submitForm=function(c,
d){c=c?c:b.attr("action");c=(a.ajaxPrefix?a.ajaxPrefix:jiant.AJAX_PREFIX?jiant.AJAX_PREFIX:"")+c;c+=a.ajaxSuffix?a.ajaxSuffix:jiant.AJAX_SUFFIX?jiant.AJAX_SUFFIX:"";var e={type:"POST",url:c,data:b.serialize(),success:d};a.crossDomain&&(e.contentType="application/json",e.dataType="jsonp",e.xhrFields={withCredentials:!0},e.crossDomain=!0);v("Submitting form",e);return f.ajax(e)}}}function I(a){f.each(arguments,function(a,c){window.console&&window.console.error&&window.console.error(c)})}function A(a){jiant.DEV_MODE&&
window.console&&window.console.info&&f.each(arguments,function(a,c){window.console.info(c)})}function v(a,b){jiant.DEBUG_MODE.data&&q("   ---   "+a)&&q(b)}function L(a){jiant.DEBUG_MODE.states&&q("   ---   "+a)}function r(a){jiant.DEBUG_MODE.events&&q("   ---   "+a)}function q(a){return window.console&&window.console.error?(window.console.error(a),!0):!1}function oa(a){function b(a,b){var h=f(z(f("<b><li class='!!ctlClass!!' style='cursor: pointer;'><a>!!label!!</a></li></b>"),{label:a,ctlClass:b}));
e.append(h);h.click(function(){c.trigger("ValueChange",a)});return h}var c=f({}),e=f("<ul></ul>");a.addClass("pagination");a.append(e);a.onValueChange=function(a){c.on("ValueChange",a)};a.updatePager=function(a){v("Updating pager",a);e.empty();var c=Math.max(0,a.number-jiant.PAGER_RADIUS/2),f=Math.min(a.number+jiant.PAGER_RADIUS/2,a.totalPages);for(0<c&&b(1,"").find("a").css("margin-right","20px");c<f;c++){var k="";c==a.number&&(k+=" active");b(c+1,k)}f<a.totalPages-1&&b(a.totalPages,"").find("a").css("margin-left",
"20px")}}function pa(a){function b(){h=Math.max(h,0);h=Math.min(h,d.children().length-1);c.css("visibility",0<h?"visible":"hidden");e.css("visibility",h<d.children().length-g?"visible":"hidden");f.each(d.children(),function(a,b){var c=f(b);a>=h&&a<h+g?c.show():c.hide()})}var c=f("<div>&lt;&lt;</div>"),e=f("<div>&gt;&gt;</div>"),d=f("<div></div>"),g=8,h=0;c.addClass("paged-prev");e.addClass("paged-next");d.addClass("paged-container");a.empty();a.append(c);a.append(d);a.append(e);c.click(function(){h-=
g;b()});e.click(function(){h+=g;b()});a.append=function(a){d.append(a);b()};a.empty=function(){d.empty();b()};a.setHorizontal=function(a){a=a?"inline-block":"block";c.css("display",a);e.css("display",a);d.css("display",a)};a.setPageSize=function(a){g=a;b()};a.setHorizontal(!0)}function B(){var a={stack:{}};Error.captureStackTrace&&Error.captureStackTrace(a,B);return a.stack}function qa(a,b,c,e,d,g){f.each(e,function(e,f){if("appPrefix"!=e)if(b[e]==jiant.lookup)jiant.logInfo("    loookup element, no checks/bindings: "+
e),b[e]=function(){return d.find("."+g+e)};else if(b[e]!=jiant.meta){var m=S.viewComponent(d,c,g,e,f);M(g,a.dirtyList,m,g+c,g+e);b[e]=m;aa(a,m,f,c,e)}})}function ra(a,b){f.each(a,function(a,e){b[a]&&(jiant.logError("unsafe extension: "+a+" already defined in base jQuery, shouldn't be used, now overriding!"),b[a]=void 0)})}function ba(a){var b=typeof a;if("object"!=b||null===a)return"string"==b&&(a='"'+a+'"'),String(a);var c=[],e=a&&a.constructor==Array;f.each(a,function(a,g){b=typeof g;"string"==
b?g='"'+g+'"':"object"==b&&null!==g&&(g=ba(g));c.push((e?"":'"'+a+'":')+(g?g:'""'))});return(e?"[":"{")+String(c)+(e?"]":"}")}function T(a,b,c){jiant.DEV_MODE&&a.click(function(e){if(e.shiftKey&&e.altKey){var d=b+(c?"."+c:"");e.ctrlKey&&(d=d+"\r\n------------\r\n"+ba(f._data(a[0],"events")));jiant.logInfo(d);alert(d);e.preventDefault();e.stopImmediatePropagation()}})}function M(a,b,c,e,d){return e&&b&&(0<=f.inArray(e,b)||a&&0<=f.inArray(e.substring(a.length),b))?!0:c&&c.length?!0:(window.console&&
window.console.error&&(d?jiant.logError("non existing object referred by class under object id '"+e+"', check stack trace for details, expected obj class: "+d):jiant.logError("non existing object referred by id, check stack trace for details, expected obj id: "+e)),K=d?K+("   ,    #"+e+" ."+d):K+(", #"+e),U=!1)}function aa(a,b,c,e,d){(c==jiant.tabs||c.tabsTmInner)&&b.tabs?(b.tabs(),b.refreshTabs=function(){b.tabs("refresh")}):c==jiant.inputInt||c.inputIntTmInner?Q(b):c==jiant.inputFloat||c.inputFloatTmInner?
ma(b):(c==jiant.inputDate||c.inputDateTmInner)&&b.datepicker?b.datepicker():c==jiant.pager||c.pagerTmInner?oa(b):c==jiant.form||c.formTmInner?na(a,b,e,d):(c==ca||c.containerPagedTmInner)&&pa(b);T(b,e,d)}function da(a,b,c,e){var d={};f.each(b,function(a,b){d[a]=b});var g=function(h,k){v("Propagating "+a+" with data",h);k=void 0==k?!0:k;f.each(d,function(a,d){if(b[a].customRenderer||h&&void 0!=h[a]&&null!=h[a]&&!(0<=f.inArray(a,["parseTemplate","parseTemplate2Text","propagate"]))){var C=h[a];d=c[a];
if(f.isFunction(C)){if(V(b,a)(h,d,C(),!1,e),k&&f.isFunction(C.on)){if(g[a]){var D=g[a][0];D&&D(g[a][1])}D=C.on(function(c,g){V(b,a)(h,d,g,!0,e)});g[a]=[C.off,D]}}else V(b,a)(h,d,C,!1,e)}})};return g}function V(a,b){return a[b]&&a[b].customRenderer&&f.isFunction(a[b].customRenderer)?a[b].customRenderer:sa}function sa(a,b,c,e,d){b&&b[0]&&(a=["text","hidden",void 0],e=b[0].tagName.toLowerCase(),"input"==e||"textarea"==e||"select"==e?(e=f(b[0]).attr("type"),0<=f.inArray(e,a)?b.val(c):"checkbox"==e?b.prop("checked",
c?!0:!1):"radio"==e&&f.each(b,function(a,b){f(b).prop("checked",b.value==c)})):"img"==e?b.attr("src",c):b.html(c))}function ta(a,b,c,e){f.each(b,function(d,g){var h=g.appPrefix?g.appPrefix:a?a:"";jiant.logInfo("binding UI for view: "+d+" using prefix "+h);var k=e.view(h,d);M(h,c.dirtyList,k,h+d)&&qa(c,b[d],d,g,k,h);ra(b[d],k);b[d].propagate=da(d,g,g,b[d]);f.extend(b[d],k);T(k,d,void 0)})}function ua(a){switch(a){case jiant.label:return"labelTmInner";case jiant.ctl:return"ctlTmInner";case jiant.container:return"containerTmInner";
case jiant.containerPaged:return"containerPagedTmInner";case jiant.form:return"formTmInner";case jiant.pager:return"pagerTmInner";case jiant.image:return"imageTmInner";case jiant.grid:return"gridTmInner";case jiant.input:return"inputTmInner";case jiant.inputInt:return"inputIntTmInner";case jiant.inputFloat:return"inputFloatTmInner";case jiant.inputDate:return"inputDateTmInner";default:return"customTmInner"}}function va(a,b,c,e){f.each(b,function(d,g){var h=g.appPrefix?g.appPrefix:a?a:"";jiant.logInfo("binding UI for template: "+
d+" using prefix "+h);var k=e.template(h,d,g);f.each(g,function(a,b){if("appPrefix"!=a)if(g[a]==jiant.lookup)jiant.logInfo("    loookup element, no checks/bindings: "+a),g[a]=function(){return g.find("."+h+a)};else if(g[a]!=jiant.meta){var f=e.viewComponent(k,d,h,a,b);M(h,c.dirtyList,f,h+d,h+a);f=ua(g[a]);g[a]={};g[a][f]=!0}});M(h,c.dirtyList,k,h+d);b[d].parseTemplate=function(a){var e=f("\x3c!-- --\x3e"+z(k,a,d));f.each(g,function(a,g){"parseTemplate"!=a&&"parseTemplate2Text"!=a&&"appPrefix"!=a&&
(e[a]=f.merge(e.filter("."+h+a),e.find("."+h+a)),aa(c,e[a],b[d][a],d,a),T(e[a],d,a))});e.splice(0,1);e.propagate=da(d,g,e,e);a&&e.propagate(a);return e};b[d].parseTemplate2Text=function(a){return z(k,a)}})}function wa(a,b,c){a[c].asap=function(e){var d;jiant.DEBUG_MODE.events&&(q("assigning event handler to "+b),l[b]&&q(" !!! Event handler assigned after fire occured, possible error, for event "+b),d=B());var g=a[c]();if(void 0!=g)e&&e.apply(e,[a,g]);else a._innerData.one(b,function(){r("called event handler: "+
b+", registered at "+d);var a=f.makeArray(arguments);a.splice(0,1);e&&e.apply(e,a)})}}function F(a,b,c,e){e=e?e:a._innerData;var d=function(d){var g;jiant.DEBUG_MODE.events&&(q("assigning event handler to "+b),l[b]&&q(" !!! Event handler assigned after fire occured, possible error, for event "+b),g=B());(c?a[c]:a).listenersCount++;var m=function(){r("called event handler: "+b+", registered at "+g);var a=f.makeArray(arguments);a.splice(0,1);d&&d.apply(d,a)};e.on(b,m);return m},g=function(d){(c?a[c]:
a).listenersCount--;e.off(b,d)};c?(a[c].on=d,a[c].off=g,a[c].listenersCount=0,wa(a,b,c)):(a.on=d,a.off=g,a.listenersCount=0)}function ea(a,b,c,e){var d=[];c._sourceObjectData={};b.updateAll&&b.id&&(b.update||(b.update=function(a){}),b.findById||(b.findById=function(a){}));b.updateAll&&(b.addAll||(b.addAll=function(a){}),b.remove||(b.remove=function(a){}));b.update||f.each(b,function(a,c){if(0==a.indexOf("set")&&3<a.length&&(""+c).indexOf("{}")==(""+c).length-2)return b.update=function(a){},!1});c._innerData=
f({});f.each(b,function(g,h){var k=a+"_"+g+"_event",m=e+a+"_globalevent";if("_innerData"!=g)if("all"==g)c[g]=function(){var a=[];f.each(d,function(b,c){a.push(c)});return a};else if("on"==g)F(c,m,void 0,p);else if("update"==g)c[g]=function(e){var d=!1,h={};f.each(e,function(a,b){c[a]&&f.isFunction(c[a])&&c[a]()!=b&&(c[a](b,!1),d=h[a]=!0)});f.each(h,function(a,b){c[a](c[a](),!0,!0)});v("Called update on model "+a+" with data",e);d&&(r("fire event: "+k),jiant.DEBUG_MODE.events&&!l[k]&&(l[k]=1),c._innerData.trigger(k,
c),c!=b&&b._innerData.trigger(k,c),r("fire event: "+m),jiant.DEBUG_MODE.events&&!l[m]&&(l[m]=1),p.trigger(m,[c,g]))},F(c,k,g);else if("updateAll"==g)c[g]=function(b,e,g){v("Called updateAll on model "+a+" with data",b);b=f.isArray(b)?b:[b];g=g?g:function(a,b){return a.id?a.id()==b.id:!1};var h=[],k=[];f.each(b,function(a,b){k.push(b)});f.each(d,function(a,c){var d;f.each(b,function(a,b){return g(c,b)?(d=b,!1):!0});var m=k.indexOf(d);e&&!d&&h.push(c);d&&0<=a&&k.splice(m,1);d&&c.update(d)});e&&f.each(h,
function(a,b){c.remove(b)});c.addAll(k)},F(c,k,g);else if("addAll"==g||"add"==g)c[g]=function(h){function D(c){var g={};d.push(g);E.push(g);ea(a,b,g,e);f.each(c,function(a,b){g[a]&&g[a](b)})}v("Called "+g+" on model "+a+" with data",h);h=f.isArray(h)?h:[h];var E=[];f.each(h,function(a,b){D(b)});r("fire event: "+k);jiant.DEBUG_MODE.events&&!l[k]&&(l[k]=1);c._innerData.trigger(k,[E]);r("fire event: "+m);jiant.DEBUG_MODE.events&&!l[m]&&(l[m]=1);p.trigger(m,[E,g]);f.each(h,function(a,b){E[a].update&&
E[a].update(b)});return E},F(c,k,g);else if("remove"==g)c[g]=function(a){var b=d.length;d=f.grep(d,function(b){return b!=a});d.length!=b&&(r("fire event: "+k),jiant.DEBUG_MODE.events&&!l[k]&&(l[k]=1),c._innerData.trigger(k,[a]),r("fire event: "+m),jiant.DEBUG_MODE.events&&!l[m]&&(l[m]=1),p.trigger(m,[a,g]));return a},F(c,k,g);else if(0==g.indexOf("findBy")&&6<g.length){var J=g.substring(6).split("And");c[g]=function(){function a(b,c,e){return f.grep(b,function(a){return void 0==e||a[c]()==e})}var b=
d,c=arguments;f.each(J,function(e,d){var g=d.substring(0,1).toLowerCase()+d.substring(1);b=a(b,g,c[e])});return b[0]}}else if(0==g.indexOf("listBy")&&6<g.length)J=g.substring(6).split("And"),c[g]=function(){function a(b,c,e){return f.grep(b,function(a){return void 0==e||a[c]()==e})}var b=d,c=arguments;f.each(J,function(e,d){var g=d.substring(0,1).toLowerCase()+d.substring(1);b=a(b,g,c[e])});return b};else if(0==g.indexOf("set")&&3<g.length)J=g.substring(3).split("And"),c[g]=function(){var a=arguments,
b={};f.each(J,function(c,e){var d=e.substring(0,1).toLowerCase()+e.substring(1);b[d]=a[c]});c.update(b);return b};else if("asMap"==g)c[g]=function(){return c._sourceObjectData};else if(W(h)||b._innerData[g])b._innerData[g]=!0,c[g]=function(a,e,d){if(0!=arguments.length)if(e||c._sourceObjectData[g]!==a&&!1!==e){var f=c._sourceObjectData[g];c._sourceObjectData[g]=a;r("fire event: "+k);jiant.DEBUG_MODE.events&&!l[k]&&(l[k]=1);c._innerData.trigger(k,[c,a,f]);c!=b&&b._innerData.trigger(k,[c,a,f]);d||(r("fire event: "+
m),jiant.DEBUG_MODE.events&&!l[m]&&(l[m]=1),p.trigger(m,[c,g,a,f]))}else c._sourceObjectData[g]=a;return c._sourceObjectData[g]},F(c,k,g)})}function W(a){return(""+a).indexOf("{}")==(""+a).length-2}function xa(a,b){f.each(a,function(a,e){jiant.logInfo("implementing model "+a);ea(a,e,e,b)})}function ya(a,b){f.each(a,function(a,e){jiant.logInfo("binding logic "+a);f.isFunction(e)?W(e)&&jiant.logError("don't declare empty logic functions, use objects for namespace grouping"):(f.each(e,function(b,g){W(g)&&
(e[b]=function(){jiant.logError("Logic function app.logics."+a+"."+b+" called before implemented!")})}),e.implement=function(d){f.each(e,function(a,b){"implement"!=a&&(d[a]?e[a]=d[a]:jiant.logError("Logic function "+a+" is not implemented by declared implementation"))});za(b,a);!G[b]&&(G[b]={});G[b][a]=1;var g=0;f.each(s[b],function(){g++});jiant.logInfo("implementation assigned to "+a+", remaining unbound logics count: "+g+(0==g?", all logics loaded OK!":""))})})}function za(a,b){var c=s[a][b];delete s[a][b];
c&&f.each(c,function(c,d){p.trigger(a+"jiant_dependency_resolved_"+b)})}function Aa(a,b){f.each(a,function(c,e){A("binding event: "+c);a[c].listenersCount=0;a[c].fire=function(){r("fire event: "+c);jiant.DEBUG_MODE.events&&!l[c]&&(l[c]=1);p.trigger(b+c+".event",arguments)};a[c].on=function(e){var g;jiant.DEBUG_MODE.events&&(q("assigning event handler to: "+c),l[c]&&q(" !!! Event handler assigned after fire occured, possible error, for event "+c),g=B());a[c].listenersCount++;p.on(b+c+".event",function(){r("called event handler: "+
c+", registered at "+g);var a=f.makeArray(arguments);a.splice(0,1);e&&e.apply(e,a)})}})}function Ba(a,b,c){f(window).hashchange?(f.each(a,function(a,d){A("binding state: "+c+a);d.go=Ca(a,d.root,b,c);d.start=function(b){var d;jiant.DEBUG_MODE.states&&(q("register state start handler: "+c+a),N[c+a]&&q(" !!! State start handler registered after state triggered, possible error, for state "+c+a),d=B());p.on(c+"state_"+a+"_start",function(){L("called state start handler: "+c+a+", registered at "+d);var k=
f.makeArray(arguments);k.splice(0,1);b&&b.apply(b,k)});var k=H(c);w[c]&&(""==a&&0==k.now.length||k.now[0]==a)&&(k=k.now,k.splice(0,1),b&&b.apply(b,k))};d.end=function(b){var d;jiant.DEBUG_MODE.states&&(q("register state end handler: "+c+a),N[c+a]&&q(" !!! State end handler registered after state triggered, possible error, for state "+a),d=B());p.on(c+"state_"+a+"_end",function(){L("called state end handler: "+c+a+", registered at "+d);var k=f.makeArray(arguments);k.splice(0,1);b&&b.apply(b,k)})}}),
f(window).hashchange(Da(c)),x[c]=H(c).now[0],X[c]=O(c)):(jiant.logError("No hashchange plugin and states configured. Don't use states or add hashchange plugin (supplied with jiant)"),jiant.DEV_MODE&&alert("No hashchange plugin and states configured. Don't use states or add hashchange plugin (supplied with jiant)"))}function Da(a){return function(b,c,e){if(!e||e==a){location.hash.substring(1);b=H(a);e=b.now[0];var d=b.now;if(c||X[a]!=O(a))d.splice(0,1),f.each(d,function(a,b){"undefined"==b&&(d[a]=
void 0)}),void 0!=x[a]&&x[a]!=e&&(L("trigger state end: "+a+(x[a]?x[a]:"")),p.trigger(a+"state_"+x[a]+"_end")),x[a]=e,X[a]=O(a),e=e?e:"",L("trigger state start: "+a+e),jiant.DEBUG_MODE.states&&!N[a+e]&&(N[a+e]=1),p.trigger(a+"state_"+e+"_start",d)}}}function Ca(a,b,c,e){return function(){var d=H(e),g=d.now;d.now=[a];v("Going to state "+a+" with data",arguments);f.each(arguments,function(b,c){void 0!=c?d.now.push(t(c)):g[0]==a&&void 0!=g[b+1]?d.now.push(t(g[b+1])):d.now.push(t(c))});if(g)for(var h=
arguments.length;h<g.length-1;)d.now.push(t(g[++h]));b?(d.root=[],f.each(d.now,function(a,b){d.root.push(b)})):f.each(d.root,function(a,b){d.root[a]=t(b)});fa(d,c,e)}}function fa(a,b,c){var e=P(),d="",g=a.now+"|"+a.root;f.each(e,function(a,b){d=c==a?d+(a+"="+g+"="):d+(a+"="+b+"=")});e[c]||(d+=c+"="+g+"=");a=b||""==b?b:jiant.STATE_EXTERNAL_BASE;window.location.assign((a?a:"")+"#"+d);f(window).hashchange()}function P(){var a=location.hash.substring(1).split("="),b={};f.each(a,function(c,e){0==c%2&&
e&&void 0!=a[c+1]&&(b[e]=a[c+1])});return b}function O(a){if(a)return a=P()[a],void 0==a?"":a;var b="";f.each(P(),function(a,e){b=e;return!1});return b}function H(a){a=O(a).split("|");var b={now:[],root:[]};f.each(a,function(a,e){var d=e.split(",");f.each(d,function(e,d){b[0==a?"now":"root"].push(Y(d))})});b.now=b.now||[];b.root=b.root||[];return b}function t(a){if(f.isPlainObject(a)){var b="{";f.each(a,function(a,e){b+=t(a);b+=":";b+=t(e);b+="}"});b="}"==b[b.length-1]?b.substring(0,b.length-1):b;
return t(b)}return(a+="")?a.replace(Ea,function(a){return ga[a]}):""}function Y(a){if((a=a?a.replace(Fa,function(a){return ha[a]}):"")&&"{"==a[0]){var b={};a=a.substring(1,a.length).split("}");f.each(a,function(a,e){var d=e.split(":");2==d.length&&(b[Y(d[0])]=Y(d[1]))});return b}return a}function Ga(a,b,c,e){f.each(a,function(d,g){A("binding ajax for function: "+d);var h;h=g.toString();(h=h.slice(h.indexOf("(")+1,h.indexOf(")")).match(/([^\s,]+)/g))&&0<h.length?h.splice(h.length-1,1):h=[];a[d]=Ha(b,
c,d,h,f.isFunction(a[d])?a[d]():void 0,e)})}function ia(a,b,c){f.isArray(c)?a[b]=c:f.isPlainObject(c)?f.each(c,function(b,c){ia(a,b,c)}):a[b]=c}function Ha(a,b,c,e,d,g){return function(){var h={},k,m,l=arguments;f.isFunction(l[l.length-2])?(k=l[l.length-2],m=l[l.length-1]):f.isFunction(l[l.length-1])&&(k=l[l.length-1]);f.each(e,function(a,b){a<l.length&&!f.isFunction(l[a])&&void 0!=l[a]&&null!=l[a]&&ia(h,b,l[a])});h.antiCache3721||(h.antiCache3721=(new Date).getTime());var p=a||""==a?a:jiant.AJAX_PREFIX,
n=b||""==b?b:jiant.AJAX_SUFFIX,p=d?d:p+c+n;A("    AJAX call. "+c+" to server url: "+p);n={data:h,traditional:!0,success:function(a){if(k){try{a=f.parseJSON(a)}catch(b){}jiant.DEBUG_MODE.ajax&&q("   ---   Ajax call results for uri "+c)&&q(a);k(a)}},error:function(a,b,c){m?m(a.responseText):jiant.handleErrorFn(a.responseText)}};g&&(n.contentType="application/json",n.dataType="jsonp",n.xhrFields={withCredentials:!0},n.crossDomain=!0);f.ajax(p,n)}}function y(a,b,c){if(a[b])return!0;if(a[c])return a[b]=
a[c],!0;a[b]={};return!1}function ja(a,b,c,e){jiant.DEV_MODE=c;!c&&0<=(window.location+"").toLowerCase().indexOf("jiant.dev_mode")&&(jiant.DEV_MODE=!0);0<=(window.location+"").toLowerCase().indexOf("jiant.debug_events")&&(jiant.DEBUG_MODE.events=1);0<=(window.location+"").toLowerCase().indexOf("jiant.debug_states")&&(jiant.DEBUG_MODE.states=1);0<=(window.location+"").toLowerCase().indexOf("jiant.debug_ajax")&&(jiant.DEBUG_MODE.ajax=1);0<=(window.location+"").toLowerCase().indexOf("jiant.debug_data")&&
(jiant.DEBUG_MODE.data=1);K="";U=!0;var d=b.id?b.id:"no_app_id";b.id?jiant.logInfo("Loading application, id: "+b.id):jiant.logError("!!! Application id not specified. Not recommended since 0.20. Use 'id' property of application root to specify application id");w[d]?jiant.logError("Application '"+d+"' already loaded, skipping multiple bind call"):(y(b,"views","v")&&ta(a,b.views,b,e),y(b,"templates","t")&&va(a,b.templates,b,e),y(b,"ajax","a")&&Ga(b.ajax,b.ajaxPrefix,b.ajaxSuffix,b.crossDomain),y(b,
"events","e")&&Aa(b.events,d),y(b,"states","s")&&Ba(b.states,b.stateExternalBase,d),y(b,"models","m")&&xa(b.models,d),y(b,"logic","l")&&ya(b.logic,d),jiant.DEV_MODE&&!U&&alert("Some elements not bound to HTML properly, check console"+K),w[d]=b,jiant.logInfo(b),p.trigger(d+"onAppInit"+d),f.when.apply(f,ka).done(function(){p.trigger(d+"jiant_uiBound_"+d)}))}function Ia(a){return f.isPlainObject(a)?a.id:a}function Z(a,b){var c=!0;f.each(a,function(e,d){if(!w[d])return p.one(d+"jiant_uiBound_"+d,function(){Z(a,
b)}),c=!1});if(c){var e=!0,d=[f];f.each(a,function(c,h){f.each(s[h],function(c,d){e=e&&0>f.inArray(b,d);!e&&p.one(h+"jiant_dependency_resolved_"+c,function(){Z(a,b)});return e});if(!e)return!1;d.push(w[h])});e&&b.apply(b,d)}}var ca={},U=!0,K,x={},X={},G={},s={},p=f({}),w={},ka=[],S=new la,N={},l={},ga={";":";;",",":";1","=":";2","|":";3","{":";4","}":";5",":":";6","#":";7","'":";7"},ha={},Ea=/;|,|=|\||\{|\}|:|#/gi,Fa=/;;|;1|;2|;3|;4|;5|;6|;7/gi;f.each(ga,function(a,b){ha[b]=a});return{AJAX_PREFIX:"",
AJAX_SUFFIX:"",DEV_MODE:!1,DEBUG_MODE:{states:0,events:0,ajax:0,data:0},PAGER_RADIUS:6,isMSIE:eval("/*@cc_on!@*/!1"),STATE_EXTERNAL_BASE:void 0,getAwaitingDepends:function(){return s},bind:function(a,b){f.extend(a,b)},bindUi:function(a,b,c,e,d){var g=(new Date).getTime();f.isPlainObject(a)&&(d=e,e=c,c=b,b=a,a=b.appPrefix);var h=b.uiFactory?b.uiFactory:S;if(e){var k;d?(k=f("#"+d),k[0]||(k=f("<div id='"+d+"' style='display:none'></div>"),f("body").append(k))):k=f("body");k.load(e,{},function(){ja(a,
b,c,h)})}else ja(a,b,c,h);jiant.logInfo("UI bound in "+((new Date).getTime()-g)+"ms");c&&setTimeout(function(){0<s.length&&I("Attention!! Some depends are not resolved",s)},1E4)},goRoot:function(a){function b(a){var b=H(a);b.now=[];f.each(b.root,function(a,c){b.now.push(t(c));b.root[a]=t(c)});fa(b,void 0,a)}a&&b(a);!a&&f.each(P(),function(a,e){b(a)})},goState:function(a,b){},onUiBound:function(a,b,c){c||b?c||(c=b,b=[]):(jiant.logError("!!! Registering anonymous logic without application id. Not recommended since 0.20"),
c=a,a=["no_app_id"]);f.isArray(a)||(a=[a]);1<a.length&&f.isArray(b)&&0<b.length?f.each(b,function(a,b){f.isArray(b)||jiant.logError("Used multiple applications onUiBound and supplied wrong dependency list, use multi-array, like [[app1DepList], [app2DepList]]")}):1==a.length&&b.length&&(b=[b]);f.each(a,function(e,d){f.isPlainObject(d)&&(d=d.id,a[e]=d);!s[d]&&(s[d]={});!G[d]&&(G[d]={});b[e]&&f.each(b[e],function(a,b){!s[d][b]&&(s[d][b]=[]);!G[d][b]&&s[d][b].push(c)})});Z(a,c)},onAppInit:function(a,
b){var c=new f.Deferred;ka.push(c.promise());var e=function(){c.resolve()};if(w[a])jiant.logError("Defining and calling onUiBound() before onAppInit().");else p.on(a+"onAppInit"+a,function(){b&&b(f,w[a],e)})},refreshState:function(a){f(window).hashchange&&f(window).trigger("hashchange",[!0,Ia(a)])},getCurrentState:function(a){a=H(a);return a.now[0]?a.now[0]:""},setUiFactory:function(a){var b=!0;f.each(["template","viewComponent","view"],function(c,e){a[e]||(jiant.logError("UI Factory doesn't implement method "+
e+", ignoring bad factory"),b=!1)});b&&(S=a)},handleErrorFn:function(a){I(a)},logInfo:A,logError:I,info:function(){var a="";f.each(arguments,function(b,c){a+=c;a+=" "});A(a)},error:function(){var a="";f.each(arguments,function(b,c){a+=c;a+=" "});I(a)},parseTemplate:function(a,b){return f(z(a,b))},parseTemplate2Text:function(a,b){return z(a,b)},version:function(){return 96},formatDate:function(a){a=u(a);return null==a?"":n(a.getFullYear())+"-"+n(a.getMonth()+1)+"-"+n(a.getDate())},formatDateUsa:function(a){a=
u(a);return null==a?"":n(a.getMonth()+1)+"/"+n(a.getDate())+"/"+n(a.getFullYear())},formatMoney:function(a,b){b=void 0!==b?b:",";var c=parseInt(a);if(isNaN(c))return"";if(0==c)return"0";for(var e=""+Math.abs(c),d=e.length;0<d;d-=3)e=e.substring(0,d)+(d<e.length?b:"")+e.substring(d);return(0>c?"-":"")+e},formatTime:function(a){a=u(a);return null==a?"":n(a.getHours())+":"+n(a.getMinutes())},formatTimeSeconds:function(a){a=u(a);return null==a?"":n(a.getHours())+":"+n(a.getMinutes())+":"+n(a.getSeconds())},
randomIntBetween:function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},lfill:n,collection:{},container:{},containerPaged:ca,ctl:{},fn:function(a){},form:{},grid:{},image:{},input:{},inputDate:{},inputInt:{},inputFloat:{},label:{},meta:{},lookup:function(a){},on:function(a){},pager:{},slider:{},stub:function(){var a="not available";arguments&&arguments.callee&&arguments.callee.caller&&(a=arguments.callee.caller.name);alert("stub called from function: "+a)},tabs:{},key:{left:37,up:38,right:39,down:40,
del:46,backspace:8,tab:9,end:35,home:36,enter:13,ctrl:17,escape:27,dot:190,comma:188,a:65,c:67,u:85,w:87,space:32,1:49,2:50,3:51,4:52,5:53,6:54}}}(jQuery);window.jiant&&window.jiant.version&&window.jiant.version()>=Q.version()||(window.jiant=Q)})();
